---
import Layout from '@/layouts/Layout.astro'
import Main from '@/components/Main.astro'
import ConversationSidebar from '@/components/conversations/ConversationSidebar'
import Settings from '@/components/settings/SettingsSidebar'
import ModalsLayer from '@/components/ModalsLayer'
import Sidebar from '@/components/ui/Sidebar'
import BuildStores from '@/components/client-only/BuildStores'
const session = await Astro.locals.auth.validate()
console.log(session)
---

<Layout title="Anse">
    <div class="h-full w-screen flex">
      <Sidebar direction="left" class="hidden md:block">
        <ConversationSidebar client:only />
      </Sidebar>
      <Main />
      <Sidebar direction="right" class="hidden lg:block">
        <Settings client:only userId={session?.user.userId || ''} />
      </Sidebar>
    </div>
    <ModalsLayer client:only />
    <BuildStores client:only />
</Layout>
